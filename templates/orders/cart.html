<!-- templates/orders/cart.html -->
{% extends 'base.html' %}

{% block title %}Корзина - ОАО "ГЗЛиН"{% endblock %}

{% block extra_css %}
<style>
    .cart-page {
        padding: 3rem 0;
    }
    
    .cart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        gap: 1rem;
    }
    
    .cart-actions {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }
    
    .cart-container {
        background: white;
        border-radius: 15px;
        box-shadow: var(--shadow);
        overflow: hidden;
        margin-bottom: 2rem;
    }
    
    .cart-table-header {
        display: grid;
        grid-template-columns: 80px 1fr 120px 120px 120px 80px;
        gap: 1rem;
        padding: 1.5rem;
        border-bottom: 2px solid var(--light-gray);
        font-weight: bold;
        color: var(--dark-gray);
        background: var(--light-gray);
    }
    
    .cart-summary {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 2rem;
        align-items: start;
    }
    
    .continue-shopping {
        background: var(--light-gray);
        border-radius: 15px;
        padding: 2rem;
        text-align: center;
    }
    
    .checkout-section {
        background: white;
        border-radius: 15px;
        box-shadow: var(--shadow);
        padding: 2rem;
        position: sticky;
        top: 100px;
    }
    
    .price-breakdown {
        border-bottom: 1px solid var(--light-gray);
        padding-bottom: 1rem;
        margin-bottom: 1rem;
    }
    
    .price-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.5rem;
    }
    
    .total-price {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--primary-red);
    }
    
    @media (max-width: 768px) {
        .cart-table-header {
            display: none;
        }
        
        .cart-container {
            border-radius: 10px;
        }
        
        .cart-summary {
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        
        .checkout-section {
            position: static;
        }
        
        .cart-actions {
            width: 100%;
        }
        
        .cart-actions .btn {
            flex: 1;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container cart-page">
    <!-- Хлебные крошки -->
    <nav aria-label="breadcrumb" style="margin-bottom: 2rem;">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'core:home' %}">Главная</a></li>
            <li class="breadcrumb-item active" aria-current="page">Корзина</li>
        </ol>
    </nav>
    
    <!-- Заголовок корзины -->
    <div class="cart-header">
        <h1>
            <i class="fas fa-shopping-cart me-2 text-primary"></i>
            Корзина
        </h1>
        <div class="cart-actions">
            <button onclick="window.GZLinCart.clearCart()" class="btn btn-outline" title="Очистить корзину">
                <i class="fas fa-trash me-2"></i>
                Очистить
            </button>
            <a href="{% url 'catalog:product_list' %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left me-2"></i>
                Продолжить покупки
            </a>
        </div>
    </div>
    
    <!-- Основной контент корзины -->
    <div class="cart-summary">
        <!-- Товары в корзине -->
        <div>
            <!-- Заголовок таблицы (только для десктопа) -->
            <div class="cart-table-header">
                <div>Фото</div>
                <div>Товар</div>
                <div>Цена</div>
                <div>Количество</div>
                <div>Сумма</div>
                <div></div>
            </div>
            
            <!-- Контейнер с товарами -->
            <div class="cart-container">
                <div class="cart-items">
                    <!-- Товары будут загружены через JavaScript -->
                    <div class="empty-cart" style="text-align: center; padding: 3rem; color: var(--secondary-gray);">
                        <i class="fas fa-shopping-cart" style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                        <h3>Корзина пуста</h3>
                        <p>Добавьте товары из каталога</p>
                        <a href="{% url 'catalog:product_list' %}" class="btn btn-primary">Перейти в каталог</a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Сводка заказа -->
        <div class="checkout-section">
            <h3 style="margin-bottom: 1.5rem; color: var(--primary-red);">
                <i class="fas fa-calculator me-2"></i>
                Итого к оплате
            </h3>
            
            <div class="cart-total">
                <!-- Итоговая сумма будет загружена через JavaScript -->
                <div style="text-align: center; color: var(--secondary-gray); padding: 2rem 0;">
                    <i class="fas fa-calculator" style="font-size: 2rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                    <p>Добавьте товары для расчета</p>
                </div>
            </div>
            
            <!-- Дополнительная информация -->
            <div style="background: var(--light-gray); border-radius: 10px; padding: 1.5rem; margin-top: 1.5rem;">
                <h4 style="margin-bottom: 1rem; font-size: 1.1rem;">
                    <i class="fas fa-info-circle me-2 text-primary"></i>
                    Информация о доставке
                </h4>
                <ul style="margin: 0; padding-left: 1.2rem; color: var(--secondary-gray); font-size: 0.9rem;">
                    <li>Бесплатная доставка по Гомелю при заказе от 500 BYN</li>
                    <li>Доставка по Беларуси 3-5 рабочих дней</li>
                    <li>Самовывоз с завода бесплатно</li>
                </ul>
            </div>
            
            <!-- Контакты для заказа -->
            <div style="background: linear-gradient(135deg, var(--primary-red), #e55550); color: white; border-radius: 10px; padding: 1.5rem; margin-top: 1.5rem; text-align: center;">
                <h4 style="margin-bottom: 1rem; color: white;">
                    <i class="fas fa-phone me-2"></i>
                    Заказать по телефону
                </h4>
                <p style="margin-bottom: 0.5rem; font-size: 1.1rem; font-weight: bold;">
                    <a href="tel:+375232123456" style="color: white; text-decoration: none;">
                        +375 232 12-34-56
                    </a>
                </p>
                <p style="margin: 0; font-size: 0.9rem; opacity: 0.9;">Пн-Пт: 8:00-17:00</p>
            </div>
        </div>
    </div>
    
    <!-- Рекомендуемые товары -->
    <div style="margin-top: 4rem;">
        <h2 style="margin-bottom: 2rem; text-align: center;">
            <i class="fas fa-star me-2 text-primary"></i>
            Рекомендуемые товары
        </h2>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
            <!-- Примеры рекомендуемых товаров -->
            <div class="product-card">
                <div class="product-image">
                    <img src="{% static 'images/products/sample1.jpg' %}" alt="Жатка валковая навесная" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="product-content">
                    <h4 class="product-title">Жатка валковая навесная 6-метровая</h4>
                    <p style="color: var(--secondary-gray); font-size: 0.9rem; margin-bottom: 1rem;">Артикул: ЖВН-6А</p>
                    <div class="product-price">281,439 BYN</div>
                    <button class="btn btn-primary add-to-cart-btn" style="width: 100%;" 
                            data-product-id="sample1" 
                            data-product-name="Жатка валковая навесная 6-метровая"
                            data-product-price="281439"
                            data-product-image="{% static 'images/products/sample1.jpg' %}">
                        <i class="fas fa-shopping-cart me-2"></i>
                        В корзину
                    </button>
                </div>
            </div>
            
            <div class="product-card">
                <div class="product-image">
                    <img src="{% static 'images/products/sample2.jpg' %}" alt="Кормоуборочная техника" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="product-content">
                    <h4 class="product-title">Режущий аппарат КСК-100</h4>
                    <p style="color: var(--secondary-gray); font-size: 0.9rem; margin-bottom: 1rem;">Артикул: РА-КСК-100</p>
                    <div class="product-price">45,250 BYN</div>
                    <button class="btn btn-primary add-to-cart-btn" style="width: 100%;"
                            data-product-id="sample2" 
                            data-product-name="Режущий аппарат КСК-100"
                            data-product-price="45250"
                            data-product-image="{% static 'images/products/sample2.jpg' %}">
                        <i class="fas fa-shopping-cart me-2"></i>
                        В корзину
                    </button>
                </div>
            </div>
            
            <div class="product-card">
                <div class="product-image">
                    <img src="{% static 'images/products/sample3.jpg' %}" alt="Метизная продукция" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="product-content">
                    <h4 class="product-title">Болт М16х60 оцинкованный</h4>
                    <p style="color: var(--secondary-gray); font-size: 0.9rem; margin-bottom: 1rem;">Артикул: Б-М16-60-Ц</p>
                    <div class="product-price">2.50 BYN</div>
                    <button class="btn btn-primary add-to-cart-btn" style="width: 100%;"
                            data-product-id="sample3" 
                            data-product-name="Болт М16х60 оцинкованный"
                            data-product-price="2.50"
                            data-product-image="{% static 'images/products/sample3.jpg' %}">
                        <i class="fas fa-shopping-cart me-2"></i>
                        В корзину
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Инициализация страницы корзины
document.addEventListener('DOMContentLoaded', function() {
    // Помечаем, что мы на странице корзины
    document.body.classList.add('cart-page-body');
    
    // Обновляем содержимое корзины
    if (window.GZLinCart) {
        window.GZLinCart.updateCartPage();
    }
});
</script>
{% endblock %}