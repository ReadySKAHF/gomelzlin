{% extends 'base.html' %}

{% block title %}–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ - –û–ê–û "–ì–ó–õ–∏–ù"{% endblock %}

{% block content %}
<div class="container" style="padding: 2rem 0;">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ç–∞–ª–æ–≥–∞ -->
    <div style="text-align: center; margin-bottom: 3rem;">
        <h1 style="color: #cb413b; font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem;">
            –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –û–ê–û "–ì–ó–õ–∏–ù"
        </h1>
        <p style="color: #6c757d; font-size: 1.2rem; max-width: 600px; margin: 0 auto;">
            –®–∏—Ä–æ–∫–∏–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏, –º–µ—Ç–∏–∑–Ω–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
        </p>
    </div>

    <!-- –°–µ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º–∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 3rem; margin: 3rem 0;">
        {% for category in categories %}
            <a href="{% if category.slug %}/catalog/category/{{ category.slug }}/{% else %}#{% endif %}" 
               style="text-decoration: none; color: inherit; display: block; height: 100%;">
                <div style="
                    background: white;
                    border-radius: 20px;
                    overflow: hidden;
                    box-shadow: 0 10px 40px rgba(203, 65, 59, 0.15);
                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                    border: 1px solid #f0f0f0;
                    height: 600px;
                    display: flex;
                    flex-direction: column;
                    cursor: pointer;
                    position: relative;
                " 
                onmouseover="this.style.transform='translateY(-15px) scale(1.03)'; this.style.boxShadow='0 25px 60px rgba(203, 65, 59, 0.3)';"
                onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 10px 40px rgba(203, 65, 59, 0.15)';">
                
                    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π -->
                    <div style="
                        position: relative; 
                        height: 250px; 
                        background: linear-gradient(135deg, #cb413b 0%, #a0342e 100%); 
                        overflow: hidden;
                        flex-shrink: 0;
                    ">
                        {% if category.image and 'http' in category.image %}
                            <img src="{{ category.image }}" alt="{{ category.name }}" 
                                 style="width: 100%; height: 100%; object-fit: cover;">
                        {% else %}
                            <div style="
                                display: flex; 
                                align-items: center; 
                                justify-content: center; 
                                height: 100%; 
                                font-size: 6rem; 
                                color: white;
                                text-shadow: 0 4px 20px rgba(0,0,0,0.4);
                                transition: transform 0.4s ease;
                            " class="emoji-container">
                                {% if category.name == "–ó–µ—Ä–Ω–æ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}üåæ
                                {% elif category.name == "–ö–æ—Ä–º–æ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}üöú
                                {% elif category.name == "–ö–∞—Ä—Ç–æ—Ñ–µ–ª–µ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}ü•î
                                {% elif category.name == "–ú–µ—Ç–∏–∑–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è" %}üî©
                                {% elif category.name == "–ë—É–Ω–∫–µ—Ä—ã-–ø–µ—Ä–µ–≥—Ä—É–∑—á–∏–∫–∏" %}üì¶
                                {% elif category.name == "–ù–æ–≤–∏–Ω–∫–∏" %}‚≠ê
                                {% elif category.name == "–ü—Ä–æ—á–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}‚öôÔ∏è
                                {% elif category.name == "–ü—Ä–æ—á–∏–µ —Ç–æ–≤–∞—Ä—ã, —Ä–∞–±–æ—Ç—ã –∏ —É—Å–ª—É–≥–∏" %}üõ†Ô∏è
                                {% elif category.name == "–†–µ–∂—É—â–∏–µ —Å–∏—Å—Ç–µ–º—ã –∂–∞—Ç–æ–∫" %}üî™
                                {% elif category.name == "–°–∞–º–æ—Ö–æ–¥–Ω—ã–µ –Ω–æ—Å–∏–ª–∫–∏" %}üöõ
                                {% else %}üè≠
                                {% endif %}
                            </div>
                        {% endif %}
                        
                        <!-- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π -->
                        <div style="
                            position: absolute; 
                            bottom: 0; 
                            left: 0; 
                            right: 0; 
                            background: linear-gradient(transparent, rgba(0,0,0,0.7)); 
                            height: 80px;
                        "></div>
                    </div>

                    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º -->
                    <div style="
                        padding: 2.5rem 2rem; 
                        flex-grow: 1; 
                        display: flex; 
                        flex-direction: column; 
                        justify-content: space-between;
                        background: white;
                        position: relative;
                    ">
                        <div>
                            <h3 style="
                                font-size: 1.6rem; 
                                font-weight: 700; 
                                color: #cb413b; 
                                margin-bottom: 1.2rem; 
                                line-height: 1.3;
                                transition: color 0.3s ease;
                            ">
                                {{ category.name }}
                            </h3>
                            
                            <div style="
                                color: #6c757d; 
                                font-size: 1.1rem; 
                                margin-bottom: 2rem; 
                                line-height: 1.6;
                                min-height: 80px;
                            ">
                                {% if category.description %}
                                    {{ category.description|truncatewords:25 }}
                                {% else %}
                                    <!-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è -->
                                    {% if category.name == "–ó–µ—Ä–Ω–æ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                        –ñ–∞—Ç–∫–∏ –≤–∞–ª–∫–æ–≤—ã–µ, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ, –¥–ª—è –∑–µ—Ä–Ω–æ–≤—ã—Ö –∫—É–ª—å—Ç—É—Ä, –ø–æ–¥–±–æ—Ä—â–∏–∫–∏ –∏ –∫–æ–º–ø–ª–µ–∫—Ç—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —É–±–æ—Ä–∫–∏ –∑–µ—Ä–Ω–æ–≤—ã—Ö –∫—É–ª—å—Ç—É—Ä
                                    {% elif category.name == "–ö–æ—Ä–º–æ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                        –ñ–∞—Ç–∫–∏ –¥–ª—è —Ç—Ä–∞–≤ –∏ –≥—Ä—É–±–æ—Å—Ç–µ–±–µ–ª—å–Ω—ã—Ö –∫—É–ª—å—Ç—É—Ä, –∫–æ—Ä–º–æ—É–±–æ—Ä–æ—á–Ω—ã–µ –∫–æ–º–±–∞–π–Ω—ã, –∫–æ—Å–∏–ª–∫–∏ –∏ –ø–æ–¥–±–æ—Ä—â–∏–∫–∏ –¥–ª—è –∑–∞–≥–æ—Ç–æ–≤–∫–∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–æ—Ä–º–æ–≤
                                    {% elif category.name == "–ö–∞—Ä—Ç–æ—Ñ–µ–ª–µ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                        –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —É–±–æ—Ä–∫–∏ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ—Ä—Ç–æ–≤ –∏ –≤ –ª—é–±—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
                                    {% elif category.name == "–ú–µ—Ç–∏–∑–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è" %}
                                        –ö—Ä–µ–ø–µ–∂–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è: –±–æ–ª—Ç—ã, –≤–∏–Ω—Ç—ã, –≥–∞–π–∫–∏, –∑–∞–∫–ª–µ–ø–∫–∏, –æ—Å–∏, —à–∞–π–±—ã –ø—Ä—É–∂–∏–Ω–Ω—ã–µ –∏ —à–ø–∏–ª—å–∫–∏ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
                                    {% elif category.name == "–ü—Ä–æ—á–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                        –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –Ω—É–∂–¥
                                    {% elif category.name == "–ë—É–Ω–∫–µ—Ä—ã-–ø–µ—Ä–µ–≥—Ä—É–∑—á–∏–∫–∏" %}
                                        –ë—É–Ω–∫–µ—Ä—ã —Ä–∞–∑–ª–∏—á–Ω–æ–π –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ –ø–µ—Ä–µ–≥—Ä—É–∑–æ—á–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∑–µ—Ä–Ω–æ–º
                                    {% elif category.name == "–ù–æ–≤–∏–Ω–∫–∏" %}
                                        –ù–æ–≤—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –æ—Ç –û–ê–û "–ì–ó–õ–∏–ù" –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–µ–ª—å—Å–∫–æ–≥–æ —Ö–æ–∑—è–π—Å—Ç–≤–∞
                                    {% elif category.name == "–ü—Ä–æ—á–∏–µ —Ç–æ–≤–∞—Ä—ã, —Ä–∞–±–æ—Ç—ã –∏ —É—Å–ª—É–≥–∏" %}
                                        –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ, —Ä–µ–º–æ–Ω—Ç, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
                                    {% elif category.name == "–†–µ–∂—É—â–∏–µ —Å–∏—Å—Ç–µ–º—ã –∂–∞—Ç–æ–∫" %}
                                        –ù–æ–∂–∏ –∂–∞—Ç–≤–µ–Ω–Ω—ã–µ, —Å–µ–≥–º–µ–Ω—Ç—ã —Ä–µ–∂—É—â–∏–µ, –ø–∞–ª—å—Ü—ã —Ä–µ–∂—É—â–µ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–∞ –∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ–∑—ã –¥–ª—è –∂–∞—Ç–æ–∫
                                    {% elif category.name == "–°–∞–º–æ—Ö–æ–¥–Ω—ã–µ –Ω–æ—Å–∏–ª–∫–∏" %}
                                        –°–∞–º–æ—Ö–æ–¥–Ω—ã–µ –Ω–æ—Å–∏–ª–∫–∏ –∏ —Ç–µ–ª–µ–∂–∫–∏ —Ä–∞–∑–ª–∏—á–Ω–æ–π –≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –≥—Ä—É–∑–æ–≤
                                    {% else %}
                                        –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è –æ—Ç –û–ê–û "–ì–ó–õ–∏–ù" –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ —Å–µ–ª—å—Å–∫–æ–º —Ö–æ–∑—è–π—Å—Ç–≤–µ
                                    {% endif %}
                                {% endif %}
                            </div>
                        </div>
                        
                        <div style="
                            display: flex; 
                            justify-content: space-between; 
                            align-items: center;
                            border-top: 1px solid #f0f0f0;
                            padding-top: 1.5rem;
                            margin-top: auto;
                        ">
                            <div style="
                                background: linear-gradient(135deg, #cb413b 0%, #a0342e 100%);
                                color: white;
                                padding: 0.8rem 1.5rem;
                                border-radius: 25px;
                                font-size: 1rem;
                                font-weight: 600;
                                letter-spacing: 0.5px;
                                box-shadow: 0 4px 15px rgba(203, 65, 59, 0.3);
                                transition: all 0.3s ease;
                            ">
                                {{ category.total_products }} —Ç–æ–≤–∞—Ä{{ category.total_products|pluralize:"–æ–≤,–æ–≤,–æ–≤" }}
                            </div>
                            
                            <div style="
                                color: #cb413b; 
                                font-size: 1.8rem; 
                                font-weight: bold;
                                transition: transform 0.3s ease;
                            " class="category-arrow">
                                ‚Üí
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        {% empty %}
            <div style="
                grid-column: 1 / -1; 
                text-align: center; 
                padding: 4rem; 
                color: #6c757d;
                background: white;
                border-radius: 15px;
                box-shadow: 0 5px 25px rgba(0,0,0,0.1);
            ">
                <div style="font-size: 4rem; margin-bottom: 1rem;">üì¶</div>
                <h3 style="margin-bottom: 1rem; color: #cb413b;">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                <p>–í–æ–∑–º–æ–∂–Ω–æ –¥–∞–Ω–Ω—ã–µ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.</p>
                <p>–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: <code>python manage.py load_initial_data</code></p>
            </div>
        {% endfor %}
    </div>

    <!-- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–æ–≤–∞—Ä—ã -->
    {% if featured_products %}
    <div style="margin-top: 5rem;">
        <h2 style="
            color: #cb413b; 
            font-size: 2rem; 
            font-weight: 700; 
            margin-bottom: 2rem; 
            text-align: center;
        ">
            –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–æ–≤–∞—Ä—ã
        </h2>
        <div style="
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 2rem;
        ">
            {% for product in featured_products %}
                <div style="
                    background: white;
                    border-radius: 15px;
                    box-shadow: 0 5px 25px rgba(0,0,0,0.1);
                    overflow: hidden;
                    transition: all 0.3s ease;
                    border: 1px solid #f0f0f0;
                "
                onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 15px 40px rgba(203, 65, 59, 0.2)';"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 5px 25px rgba(0,0,0,0.1)';">
                    
                    <div style="
                        height: 200px;
                        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 3rem;
                        color: #cb413b;
                    ">
                        {% if product.image %}
                            <img src="{{ product.image.url }}" alt="{{ product.name }}" 
                                 style="width: 100%; height: 100%; object-fit: cover;">
                        {% else %}
                            {% if '–∂–∞—Ç–∫–∞' in product.name|lower %}üåæ
                            {% elif '–∫–æ–º–±–∞–π–Ω' in product.name|lower %}üöú
                            {% elif '–±–æ–ª—Ç' in product.name|lower or '–≥–∞–π–∫–∞' in product.name|lower %}üî©
                            {% elif '–±—É–Ω–∫–µ—Ä' in product.name|lower %}üì¶
                            {% else %}üè≠
                            {% endif %}
                        {% endif %}
                    </div>
                    
                    <div style="padding: 1.5rem;">
                        <h4 style="
                            font-size: 1.2rem; 
                            font-weight: 600; 
                            color: #343a40; 
                            margin-bottom: 0.8rem;
                            line-height: 1.3;
                        ">
                            {{ product.name }}
                        </h4>
                        
                        {% if product.short_description %}
                            <p style="
                                color: #6c757d; 
                                font-size: 0.95rem; 
                                margin-bottom: 1.5rem;
                                line-height: 1.4;
                            ">
                                {{ product.short_description|truncatewords:15 }}
                            </p>
                        {% endif %}
                        
                        <div style="
                            display: flex; 
                            justify-content: space-between; 
                            align-items: center;
                            border-top: 1px solid #f0f0f0;
                            padding-top: 1rem;
                        ">
                            <span style="
                                font-weight: 700; 
                                font-size: 1.3rem; 
                                color: #cb413b;
                            ">
                                {{ product.price }} —Ä.
                            </span>
                            
                            <button onclick="addToCart({{ product.id }})" style="
                                background: linear-gradient(135deg, #cb413b 0%, #a0342e 100%);
                                color: white;
                                border: none;
                                padding: 0.8rem 1.5rem;
                                border-radius: 8px;
                                font-weight: 600;
                                font-size: 0.9rem;
                                cursor: pointer;
                                transition: all 0.3s ease;
                                box-shadow: 0 4px 15px rgba(203, 65, 59, 0.3);
                                display: flex;
                                align-items: center;
                                gap: 0.5rem;
                            "
                            onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(203, 65, 59, 0.4)';"
                            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(203, 65, 59, 0.3)';">
                                üõí –í –∫–æ—Ä–∑–∏–Ω—É
                            </button>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>

<!-- CSRF —Ç–æ–∫–µ–Ω –¥–ª—è AJAX –∑–∞–ø—Ä–æ—Å–æ–≤ -->
{% csrf_token %}

<style>
/* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —ç–º–æ–¥–∑–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
.emoji-container:hover {
    transform: scale(1.15) rotate(5deg) !important;
}

.category-arrow:hover {
    transform: translateX(8px) !important;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 1200px) {
    .container > div:first-of-type {
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)) !important;
        gap: 2rem !important;
    }
}

@media (max-width: 768px) {
    .container > div:first-of-type {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)) !important;
        gap: 1.5rem !important;
    }
    
    .container > div:first-of-type > a > div {
        height: 480px !important;
    }
    
    .container > div:first-of-type > a > div > div:first-child {
        height: 200px !important;
    }
    
    .container > div:first-of-type > a > div > div:first-child > div {
        font-size: 5rem !important;
    }
    
    .container h1 {
        font-size: 2rem !important;
    }
    
    .container h3 {
        font-size: 1.4rem !important;
    }
}

@media (max-width: 480px) {
    .container > div:first-of-type {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
        margin: 2rem 0 !important;
    }
    
    .container > div:first-of-type > a > div {
        height: 420px !important;
    }
    
    .container > div:first-of-type > a > div > div:first-child {
        height: 160px !important;
    }
    
    .container > div:first-of-type > a > div > div:first-child > div {
        font-size: 4rem !important;
    }
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.container > div:first-of-type > a {
    animation: fadeInUp 0.6s ease forwards;
}

.container > div:first-of-type > a:nth-child(1) { animation-delay: 0.1s; }
.container > div:first-of-type > a:nth-child(2) { animation-delay: 0.2s; }
.container > div:first-of-type > a:nth-child(3) { animation-delay: 0.3s; }
.container > div:first-of-type > a:nth-child(4) { animation-delay: 0.4s; }
.container > div:first-of-type > a:nth-child(5) { animation-delay: 0.5s; }
.container > div:first-of-type > a:nth-child(6) { animation-delay: 0.6s; }
</style>

<script>
// –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É
function addToCart(productId, quantity = 1) {
    const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–µ
    const button = event.target;
    const originalText = button.innerHTML;
    button.innerHTML = '‚è≥ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ...';
    button.disabled = true;
    
    fetch('/cart/add/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'X-CSRFToken': csrfToken,
        },
        body: `product_id=${productId}&quantity=${quantity}`
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã
            updateCartCount();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!', 'success');
            
            // –ú–µ–Ω—è–µ–º –∫–Ω–æ–ø–∫—É –≤—Ä–µ–º–µ–Ω–Ω–æ
            button.innerHTML = '‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ';
            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
            }, 1500);
        } else {
            showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞', 'error');
            button.innerHTML = originalText;
            button.disabled = false;
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showNotification('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞', 'error');
        button.innerHTML = originalText;
        button.disabled = false;
    });
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
function updateCartCount() {
    fetch('/cart/count/')
        .then(response => response.json())
        .then(data => {
            const cartCountElement = document.querySelector('.cart-count');
            if (cartCountElement) {
                cartCountElement.textContent = data.count;
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                cartCountElement.style.transform = 'scale(1.3)';
                cartCountElement.style.background = '#28a745';
                setTimeout(() => {
                    cartCountElement.style.transform = 'scale(1)';
                    cartCountElement.style.background = 'white';
                }, 300);
            }
        })
        .catch(error => console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ—Ä–∑–∏–Ω—ã:', error));
}

// –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.innerHTML = `
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <span>${type === 'success' ? '‚úÖ' : '‚ùå'}</span>
            <span>${message}</span>
        </div>
    `;
    
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? 'linear-gradient(135deg, #28a745 0%, #20c997 100%)' : 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)'};
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        z-index: 1000;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        animation: slideIn 0.3s ease;
        font-weight: 600;
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease forwards';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// CSS –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
const notificationStyle = document.createElement('style');
notificationStyle.textContent = `
    @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes slideOut {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
    }
`;
document.head.appendChild(notificationStyle);

// –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', updateCartCount);
</script>
{% endblock %}