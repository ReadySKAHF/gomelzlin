{% extends 'base.html' %}

{% block title %}–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ - –û–ê–û "–ì–ó–õ–∏–ù"{% endblock %}

{% block content %}
<div class="container" style="padding: 2rem 0;">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ç–∞–ª–æ–≥–∞ -->
    <div style="text-align: center; margin-bottom: 3rem;">
        <h1 style="color: #cb413b; font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem;">
            –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –û–ê–û "–ì–ó–õ–∏–ù"
        </h1>
        <p style="color: #6c757d; font-size: 1.2rem; max-width: 600px; margin: 0 auto;">
            –®–∏—Ä–æ–∫–∏–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏, –º–µ—Ç–∏–∑–Ω–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
        </p>
    </div>

    <!-- –ù–û–í–´–ô –ë–õ–û–ö –ü–û–ò–°–ö–ê -->
    <div class="search-section" style="
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 40px rgba(203, 65, 59, 0.15);
        padding: 2rem;
        margin: 2rem 0 3rem 0;
        position: relative;
    ">
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
            <div style="font-size: 1.5rem;">üîç</div>
            <h2 style="color: #cb413b; margin: 0; font-size: 1.5rem; font-weight: 600;">
                –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            </h2>
        </div>
        
        <form class="search-form" style="display: flex; gap: 1rem; align-items: center;" onsubmit="return handleSearch(event)">
            <div class="search-input-wrapper" style="flex: 1; position: relative;">
                <input 
                    type="text" 
                    class="search-input" 
                    id="searchInput" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –∏–ª–∏ –∞—Ä—Ç–∏–∫—É–ª..." 
                    autocomplete="off"
                    style="
                        width: 100%;
                        padding: 1rem 1.5rem 1rem 3.5rem;
                        border: 2px solid #e9ecef;
                        border-radius: 12px;
                        font-size: 1.1rem;
                        transition: all 0.3s ease;
                        background: white;
                    "
                    onfocus="this.style.borderColor='#cb413b'; this.style.boxShadow='0 0 0 3px rgba(203, 65, 59, 0.1)'"
                    onblur="this.style.borderColor='#e9ecef'; this.style.boxShadow='none'"
                    oninput="handleSearchInput(event)"
                >
                <div style="
                    position: absolute;
                    left: 1rem;
                    top: 50%;
                    transform: translateY(-50%);
                    color: #808080;
                    font-size: 1.2rem;
                ">üîç</div>
                
                <!-- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ -->
                <div class="search-suggestions" id="suggestions" style="
                    position: absolute;
                    top: 100%;
                    left: 0;
                    right: 0;
                    background: white;
                    border: 1px solid #e9ecef;
                    border-top: none;
                    border-radius: 0 0 12px 12px;
                    box-shadow: 0 10px 40px rgba(203, 65, 59, 0.15);
                    z-index: 1000;
                    max-height: 400px;
                    overflow-y: auto;
                    display: none;
                "></div>
            </div>
            
            <button type="submit" class="search-btn" style="
                background: linear-gradient(135deg, #cb413b 0%, #a0342e 100%);
                color: white;
                border: none;
                padding: 1rem 2rem;
                border-radius: 12px;
                font-size: 1.1rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                min-width: 120px;
            " 
            onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(203, 65, 59, 0.25)'"
            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'"
            onmousedown="this.style.transform='translateY(0)'"
            >
                –ù–∞–π—Ç–∏
            </button>
        </form>
        
        <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã -->
        <div style="margin-top: 1.5rem;">
            <p style="color: #808080; margin-bottom: 0.5rem; font-size: 0.9rem;">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:</p>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                <a href="javascript:searchFor('–∫–æ–º–±–∞–π–Ω')" style="
                    background: #f8f9fa;
                    color: #808080;
                    padding: 0.3rem 0.8rem;
                    border-radius: 20px;
                    text-decoration: none;
                    font-size: 0.9rem;
                    transition: all 0.2s ease;
                    border: 1px solid #e9ecef;
                " 
                onmouseover="this.style.background='#cb413b'; this.style.color='white'; this.style.borderColor='#cb413b'"
                onmouseout="this.style.background='#f8f9fa'; this.style.color='#808080'; this.style.borderColor='#e9ecef'"
                >–∫–æ–º–±–∞–π–Ω</a>
                
                <a href="javascript:searchFor('–∂–∞—Ç–∫–∞')" style="
                    background: #f8f9fa;
                    color: #808080;
                    padding: 0.3rem 0.8rem;
                    border-radius: 20px;
                    text-decoration: none;
                    font-size: 0.9rem;
                    transition: all 0.2s ease;
                    border: 1px solid #e9ecef;
                " 
                onmouseover="this.style.background='#cb413b'; this.style.color='white'; this.style.borderColor='#cb413b'"
                onmouseout="this.style.background='#f8f9fa'; this.style.color='#808080'; this.style.borderColor='#e9ecef'"
                >–∂–∞—Ç–∫–∞</a>
                
                <a href="javascript:searchFor('–º–µ—Ç–∏–∑—ã')" style="
                    background: #f8f9fa;
                    color: #808080;
                    padding: 0.3rem 0.8rem;
                    border-radius: 20px;
                    text-decoration: none;
                    font-size: 0.9rem;
                    transition: all 0.2s ease;
                    border: 1px solid #e9ecef;
                " 
                onmouseover="this.style.background='#cb413b'; this.style.color='white'; this.style.borderColor='#cb413b'"
                onmouseout="this.style.background='#f8f9fa'; this.style.color='#808080'; this.style.borderColor='#e9ecef'"
                >–º–µ—Ç–∏–∑—ã</a>
                
                <a href="javascript:searchFor('–±—É–Ω–∫–µ—Ä')" style="
                    background: #f8f9fa;
                    color: #808080;
                    padding: 0.3rem 0.8rem;
                    border-radius: 20px;
                    text-decoration: none;
                    font-size: 0.9rem;
                    transition: all 0.2s ease;
                    border: 1px solid #e9ecef;
                " 
                onmouseover="this.style.background='#cb413b'; this.style.color='white'; this.style.borderColor='#cb413b'"
                onmouseout="this.style.background='#f8f9fa'; this.style.color='#808080'; this.style.borderColor='#e9ecef'"
                >–±—É–Ω–∫–µ—Ä</a>
            </div>
        </div>
    </div>

    <!-- –°–µ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º–∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 3rem; margin: 3rem 0;">
        {% for category in categories %}
            <a href="{% if category.slug %}/catalog/category/{{ category.slug }}/{% else %}#{% endif %}" 
               style="text-decoration: none; color: inherit; display: block; height: 100%;">
                <div style="
                    background: white;
                    border-radius: 20px;
                    overflow: hidden;
                    box-shadow: 0 10px 40px rgba(203, 65, 59, 0.15);
                    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                    border: 1px solid #f0f0f0;
                    height: 600px;
                    display: flex;
                    flex-direction: column;
                    cursor: pointer;
                    position: relative;
                " 
                onmouseover="this.style.transform='translateY(-15px) scale(1.03)'; this.style.boxShadow='0 25px 60px rgba(203, 65, 59, 0.3)';"
                onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 10px 40px rgba(203, 65, 59, 0.15)';">
                
                    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π -->
                    <div style="
                        position: relative; 
                        height: 250px; 
                        background: linear-gradient(135deg, #cb413b 0%, #a0342e 100%); 
                        overflow: hidden;
                        flex-shrink: 0;
                    ">
                        {% if category.image and 'http' in category.image %}
                            <img src="{{ category.image }}" alt="{{ category.name }}" 
                                 style="width: 100%; height: 100%; object-fit: cover;">
                        {% else %}
                            <!-- –≠–º–æ–¥–∑–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
                            <div style="
                                width: 100%; 
                                height: 100%; 
                                display: flex; 
                                align-items: center; 
                                justify-content: center; 
                                font-size: 6rem;
                                color: rgba(255,255,255,0.9);
                                text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
                            ">
                                {% if category.name == "–ó–µ—Ä–Ω–æ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                    üåæ
                                {% elif category.name == "–ö–æ—Ä–º–æ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                    üöú
                                {% elif category.name == "–ö–∞—Ä—Ç–æ—Ñ–µ–ª–µ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                    ü•î
                                {% elif category.name == "–ú–µ—Ç–∏–∑–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è" %}
                                    üî©
                                {% elif category.name == "–ü—Ä–æ—á–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                    ‚öôÔ∏è
                                {% elif category.name == "–ë—É–Ω–∫–µ—Ä—ã-–ø–µ—Ä–µ–≥—Ä—É–∑—á–∏–∫–∏" %}
                                    üì¶
                                {% elif category.name == "–ù–æ–≤–∏–Ω–∫–∏" %}
                                    ‚ú®
                                {% elif category.name == "–ü—Ä–æ—á–∏–µ —Ç–æ–≤–∞—Ä—ã, —Ä–∞–±–æ—Ç—ã –∏ —É—Å–ª—É–≥–∏" %}
                                    üõ†Ô∏è
                                {% elif category.name == "–†–µ–∂—É—â–∏–µ —Å–∏—Å—Ç–µ–º—ã –∂–∞—Ç–æ–∫" %}
                                    ‚öîÔ∏è
                                {% elif category.name == "–°–∞–º–æ—Ö–æ–¥–Ω—ã–µ –Ω–æ—Å–∏–ª–∫–∏" %}
                                    üöö
                                {% else %}
                                    üè≠
                                {% endif %}
                            </div>
                        {% endif %}
                    </div>
                    
                    <div style="padding: 2rem; display: flex; flex-direction: column; flex-grow: 1;">
                        <div style="flex-grow: 1;">
                            <h3 style="
                                font-size: 1.6rem; 
                                font-weight: 700; 
                                color: #cb413b; 
                                margin-bottom: 1.2rem; 
                                line-height: 1.3;
                                transition: color 0.3s ease;
                            ">
                                {{ category.name }}
                            </h3>
                            
                            <div style="
                                color: #6c757d; 
                                font-size: 1.1rem; 
                                margin-bottom: 2rem; 
                                line-height: 1.6;
                                min-height: 80px;
                            ">
                                {% if category.description %}
                                    {{ category.description|truncatewords:25 }}
                                {% else %}
                                    <!-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è -->
                                    {% if category.name == "–ó–µ—Ä–Ω–æ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                        –ñ–∞—Ç–∫–∏ –≤–∞–ª–∫–æ–≤—ã–µ, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ, –¥–ª—è –∑–µ—Ä–Ω–æ–≤—ã—Ö –∫—É–ª—å—Ç—É—Ä, –ø–æ–¥–±–æ—Ä—â–∏–∫–∏ –∏ –∫–æ–º–ø–ª–µ–∫—Ç—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —É–±–æ—Ä–∫–∏ –∑–µ—Ä–Ω–æ–≤—ã—Ö –∫—É–ª—å—Ç—É—Ä
                                    {% elif category.name == "–ö–æ—Ä–º–æ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                        –ñ–∞—Ç–∫–∏ –¥–ª—è —Ç—Ä–∞–≤ –∏ –≥—Ä—É–±–æ—Å—Ç–µ–±–µ–ª—å–Ω—ã—Ö –∫—É–ª—å—Ç—É—Ä, –∫–æ—Ä–º–æ—É–±–æ—Ä–æ—á–Ω—ã–µ –∫–æ–º–±–∞–π–Ω—ã, –∫–æ—Å–∏–ª–∫–∏ –∏ –ø–æ–¥–±–æ—Ä—â–∏–∫–∏ –¥–ª—è –∑–∞–≥–æ—Ç–æ–≤–∫–∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–æ—Ä–º–æ–≤
                                    {% elif category.name == "–ö–∞—Ä—Ç–æ—Ñ–µ–ª–µ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                        –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —É–±–æ—Ä–∫–∏ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ—Ä—Ç–æ–≤ –∏ –≤ –ª—é–±—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
                                    {% elif category.name == "–ú–µ—Ç–∏–∑–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è" %}
                                        –ö—Ä–µ–ø–µ–∂–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è: –±–æ–ª—Ç—ã, –≤–∏–Ω—Ç—ã, –≥–∞–π–∫–∏, –∑–∞–∫–ª–µ–ø–∫–∏, –æ—Å–∏, —à–∞–π–±—ã –ø—Ä—É–∂–∏–Ω–Ω—ã–µ –∏ —à–ø–∏–ª—å–∫–∏ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
                                    {% elif category.name == "–ü—Ä–æ—á–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                        –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –Ω—É–∂–¥
                                    {% elif category.name == "–ë—É–Ω–∫–µ—Ä—ã-–ø–µ—Ä–µ–≥—Ä—É–∑—á–∏–∫–∏" %}
                                        –ë—É–Ω–∫–µ—Ä—ã —Ä–∞–∑–ª–∏—á–Ω–æ–π –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ –ø–µ—Ä–µ–≥—Ä—É–∑–æ—á–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∑–µ—Ä–Ω–æ–º
                                    {% elif category.name == "–ù–æ–≤–∏–Ω–∫–∏" %}
                                        –ù–æ–≤—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –æ—Ç –û–ê–û "–ì–ó–õ–∏–ù" –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–µ–ª—å—Å–∫–æ–≥–æ —Ö–æ–∑—è–π—Å—Ç–≤–∞
                                    {% elif category.name == "–ü—Ä–æ—á–∏–µ —Ç–æ–≤–∞—Ä—ã, —Ä–∞–±–æ—Ç—ã –∏ —É—Å–ª—É–≥–∏" %}
                                        –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ, —Ä–µ–º–æ–Ω—Ç, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
                                    {% elif category.name == "–†–µ–∂—É—â–∏–µ —Å–∏—Å—Ç–µ–º—ã –∂–∞—Ç–æ–∫" %}
                                        –ù–æ–∂–∏ –∂–∞—Ç–≤–µ–Ω–Ω—ã–µ, —Å–µ–≥–º–µ–Ω—Ç—ã —Ä–µ–∂—É—â–∏–µ, –ø–∞–ª—å—Ü—ã —Ä–µ–∂—É—â–µ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–∞ –∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ–∑—ã –¥–ª—è –∂–∞—Ç–æ–∫
                                    {% elif category.name == "–°–∞–º–æ—Ö–æ–¥–Ω—ã–µ –Ω–æ—Å–∏–ª–∫–∏" %}
                                        –°–∞–º–æ—Ö–æ–¥–Ω—ã–µ –Ω–æ—Å–∏–ª–∫–∏ –∏ —Ç–µ–ª–µ–∂–∫–∏ —Ä–∞–∑–ª–∏—á–Ω–æ–π –≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –≥—Ä—É–∑–æ–≤
                                    {% else %}
                                        –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è –æ—Ç –û–ê–û "–ì–ó–õ–∏–ù" –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ —Å–µ–ª—å—Å–∫–æ–º —Ö–æ–∑—è–π—Å—Ç–≤–µ
                                    {% endif %}
                                {% endif %}
                            </div>
                        </div>
                        
                        <div style="
                            display: flex; 
                            justify-content: space-between; 
                            align-items: center;
                            border-top: 1px solid #f0f0f0;
                            padding-top: 1.5rem;
                            margin-top: auto;
                        ">
                            <div style="
                                background: linear-gradient(135deg, #cb413b 0%, #a0342e 100%);
                                color: white;
                                padding: 0.8rem 1.5rem;
                                border-radius: 25px;
                                font-size: 1rem;
                                font-weight: 600;
                                letter-spacing: 0.5px;
                                box-shadow: 0 4px 15px rgba(203, 65, 59, 0.3);
                                transition: all 0.3s ease;
                            ">
                                {% load russian_utils %}
                                {{ category.total_products|count_with_word:"—Ç–æ–≤–∞—Ä,—Ç–æ–≤–∞—Ä–∞,—Ç–æ–≤–∞—Ä–æ–≤" }}
                            </div>
                            
                            <div style="
                                font-size: 2rem; 
                                color: #cb413b; 
                                font-size: 1.8rem; 
                                font-weight: bold;
                                transition: transform 0.3s ease;
                            " class="category-arrow">
                                ‚Üí
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        {% empty %}
            <div style="
                grid-column: 1 / -1; 
                text-align: center; 
                padding: 4rem; 
                color: #6c757d;
                background: white;
                border-radius: 15px;
                box-shadow: 0 5px 25px rgba(0,0,0,0.1);
            ">
                <div style="font-size: 4rem; margin-bottom: 1rem;">üì¶</div>
                <h3 style="margin-bottom: 1rem; color: #cb413b;">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                <p>–í–æ–∑–º–æ–∂–Ω–æ –¥–∞–Ω–Ω—ã–µ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.</p>
                <p>–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: <code>python manage.py load_initial_data</code></p>
            </div>
        {% endfor %}
    </div>

    <!-- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–æ–≤–∞—Ä—ã -->
    {% if featured_products %}
    <div style="margin-top: 5rem;">
        <h2 style="
            color: #cb413b; 
            font-size: 2rem; 
            font-weight: 700; 
            margin-bottom: 2rem; 
            text-align: center;
        ">
            –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–æ–≤–∞—Ä—ã
        </h2>
        <div style="
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 2rem;
        ">
            {% for product in featured_products %}
                <div style="
                    background: white;
                    border-radius: 15px;
                    box-shadow: 0 5px 25px rgba(0,0,0,0.1);
                    overflow: hidden;
                    transition: all 0.3s ease;
                    border: 1px solid #f0f0f0;
                "
                onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 15px 40px rgba(203, 65, 59, 0.2)';"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 5px 25px rgba(0,0,0,0.1)';">
                    
                    <div style="
                        height: 200px;
                        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 3rem;
                        color: #cb413b;
                    ">
                        {% if '–∂–∞—Ç–∫–∞' in product.name|lower %}
                            üåæ
                        {% elif '–∫–æ–º–±–∞–π–Ω' in product.name|lower %}
                            üöú
                        {% elif '–±–æ–ª—Ç' in product.name|lower or '–≥–∞–π–∫–∞' in product.name|lower %}
                            üî©
                        {% else %}
                            üè≠
                        {% endif %}
                    </div>
                    
                    <div style="padding: 1.5rem;">
                        <h4 style="
                            font-size: 1.2rem; 
                            font-weight: 600; 
                            margin-bottom: 0.5rem;
                            color: #333;
                        ">
                            {{ product.name|truncatechars:50 }}
                        </h4>
                        
                        <p style="
                            color: #6c757d; 
                            font-size: 0.9rem; 
                            margin-bottom: 1rem;
                        ">
                            –ê—Ä—Ç–∏–∫—É–ª: {{ product.article }}
                        </p>
                        
                        {% if product.price %}
                            <div style="
                                font-size: 1.3rem; 
                                font-weight: 700; 
                                color: #cb413b;
                                margin-bottom: 1rem;
                            ">
                                {{ product.price }} BYN
                            </div>
                        {% endif %}
                        
                        <a href="{{ product.get_absolute_url }}" style="
                            display: inline-block;
                            background: linear-gradient(135deg, #cb413b 0%, #a0342e 100%);
                            color: white;
                            padding: 0.7rem 1.5rem;
                            border-radius: 8px;
                            text-decoration: none;
                            font-weight: 600;
                            font-size: 0.9rem;
                            transition: all 0.3s ease;
                        "
                        onmouseover="this.style.transform='translateY(-2px)'"
                        onmouseout="this.style.transform='translateY(0)'"
                        >
                            –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>

<!-- JavaScript –¥–ª—è –ø–æ–∏—Å–∫–∞ -->
<script>
// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–∏—Å–∫–æ–º
let searchTimeout;
let isSearching = false;

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –≤ –ø–æ–∏—Å–∫–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ
function handleSearchInput(event) {
    const query = event.target.value.trim();
    const suggestionsContainer = document.getElementById('suggestions');
    
    // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–∞—É—Ç
    clearTimeout(searchTimeout);
    
    if (query.length < 2) {
        hideSuggestions();
        return;
    }
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ç–∞–π–º–∞—É—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
    searchTimeout = setTimeout(() => {
        fetchSuggestions(query);
    }, 300);
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å —Å–µ—Ä–≤–µ—Ä–∞
async function fetchSuggestions(query) {
    if (isSearching) return;
    
    isSearching = true;
    
    try {
        const response = await fetch(`/catalog/ajax/quick-search/?q=${encodeURIComponent(query)}`);
        const data = await response.json();
        
        displaySuggestions(data.results || []);
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞:', error);
        hideSuggestions();
    } finally {
        isSearching = false;
    }
}

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
function displaySuggestions(results) {
    const suggestionsContainer = document.getElementById('suggestions');
    
    if (results.length === 0) {
        hideSuggestions();
        return;
    }
    
    let html = '';
    
    results.forEach(item => {
        const emoji = getItemEmoji(item.name, item.category_name);
        const itemType = item.type === 'product' ? '–¢–æ–≤–∞—Ä' : '–ö–∞—Ç–µ–≥–æ—Ä–∏—è';
        
        html += `
            <div class="suggestion-item" style="
                padding: 1rem;
                border-bottom: 1px solid #f8f9fa;
                cursor: pointer;
                transition: background-color 0.2s ease;
                display: flex;
                align-items: center;
                gap: 1rem;
            " 
            onmouseover="this.style.backgroundColor='#f8f9fa'"
            onmouseout="this.style.backgroundColor='white'"
            onclick="selectSuggestion('${item.url}')">
                
                <div style="
                    font-size: 1.5rem;
                    width: 40px;
                    height: 40px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background: #f8f9fa;
                    border-radius: 8px;
                ">
                    ${emoji}
                </div>
                
                <div style="flex: 1;">
                    <div style="
                        font-weight: 600;
                        color: #333;
                        margin-bottom: 0.25rem;
                    ">
                        ${item.name}
                    </div>
                    
                    <div style="
                        font-size: 0.9rem;
                        color: #808080;
                        display: flex;
                        gap: 1rem;
                        align-items: center;
                    ">
                        <span style="
                            background: linear-gradient(135deg, #cb413b 0%, #a0342e 100%);
                            color: white;
                            padding: 0.1rem 0.5rem;
                            border-radius: 4px;
                            font-size: 0.8rem;
                            font-weight: 500;
                        ">${itemType}</span>
                        
                        ${item.article ? `<span>–ê—Ä—Ç: ${item.article}</span>` : ''}
                        ${item.category_name ? `<span>‚Ä¢ ${item.category_name}</span>` : ''}
                    </div>
                </div>
            </div>
        `;
    });
    
    suggestionsContainer.innerHTML = html;
    suggestionsContainer.style.display = 'block';
}

// –°–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
function hideSuggestions() {
    const suggestionsContainer = document.getElementById('suggestions');
    suggestionsContainer.style.display = 'none';
}

// –í—ã–±–æ—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
function selectSuggestion(url) {
    window.location.href = url;
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞
function getItemEmoji(name, categoryName) {
    const lowerName = name.toLowerCase();
    const lowerCategory = (categoryName || '').toLowerCase();
    
    if (lowerName.includes('–∂–∞—Ç–∫–∞') || lowerCategory.includes('–∑–µ—Ä–Ω–æ')) {
        return 'üåæ';
    } else if (lowerName.includes('–∫–æ–º–±–∞–π–Ω') || lowerCategory.includes('–∫–æ—Ä–º–æ')) {
        return 'üöú';
    } else if (lowerName.includes('–∫–∞—Ä—Ç–æ—Ñ–µ–ª—å')) {
        return 'ü•î';
    } else if (lowerName.includes('–±–æ–ª—Ç') || lowerName.includes('–≥–∞–π–∫–∞') || lowerCategory.includes('–º–µ—Ç–∏–∑')) {
        return 'üî©';
    } else if (lowerName.includes('–±—É–Ω–∫–µ—Ä')) {
        return 'üì¶';
    } else if (lowerName.includes('—Ä–µ–∂—É—â')) {
        return '‚öîÔ∏è';
    } else if (lowerName.includes('–Ω–æ—Å–∏–ª–∫–∏')) {
        return 'üöö';
    } else {
        return 'üè≠';
    }
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –ø–æ–∏—Å–∫–∞
function handleSearch(event) {
    event.preventDefault();
    const query = document.getElementById('searchInput').value.trim();
    
    if (query.length < 2) {
        alert('–í–≤–µ–¥–∏—Ç–µ –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞');
        return false;
    }
    
    // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∏—Å–∫–∞
    window.location.href = `/catalog/search/?q=${encodeURIComponent(query)}`;
    return false;
}

// –ü–æ–∏—Å–∫ –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –∑–∞–ø—Ä–æ—Å–∞–º
function searchFor(query) {
    document.getElementById('searchInput').value = query;
    window.location.href = `/catalog/search/?q=${encodeURIComponent(query)}`;
}

// –°–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –ø–æ–∏—Å–∫–∞
document.addEventListener('click', function(event) {
    const searchSection = event.target.closest('.search-section');
    if (!searchSection) {
        hideSuggestions();
    }
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º
document.getElementById('searchInput').addEventListener('keydown', function(event) {
    const suggestions = document.querySelectorAll('.suggestion-item');
    
    if (event.key === 'Escape') {
        hideSuggestions();
        this.blur();
    }
});
</script>

<style>
/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π */
.category-arrow {
    transition: transform 0.3s ease !important;
}

.category-arrow:hover {
    transform: translateX(8px) !important;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–∏—Å–∫–æ–≤–æ–π —Ñ–æ—Ä–º—ã */
@media (max-width: 768px) {
    .search-form {
        flex-direction: column !important;
        gap: 1rem !important;
    }
    
    .search-input-wrapper {
        width: 100% !important;
    }
    
    .search-btn {
        width: 100% !important;
    }
    
    .search-section > div:last-child > div {
        justify-content: center !important;
    }
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π */
.search-suggestions {
    animation: slideDown 0.2s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 1200px) {
    .container > div:first-of-type {
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)) !important;
        gap: 2rem !important;
    }
}

@media (max-width: 768px) {
    .container > div:first-of-type {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)) !important;
        gap: 1.5rem !important;
    }
    
    .container > div:first-of-type > a > div {
        height: 480px !important;
    }
    
    .container > div:first-of-type > a > div > div:first-child {
        height: 200px !important;
    }
    
    .container > div:first-of-type > a > div > div:first-child > div {
        font-size: 5rem !important;
    }
    
    .container h1 {
        font-size: 2rem !important;
    }
    
    .container h3 {
        font-size: 1.4rem !important;
    }
}

@media (max-width: 480px) {
    .container > div:first-of-type {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
        margin: 2rem 0 !important;
    }
    
    .container > div:first-of-type > a > div {
        height: 420px !important;
    }
    
    .container > div:first-of-type > a > div > div:first-child {
        height: 160px !important;
    }
    
    .container > div:first-of-type > a > div > div:first-child > div {
        font-size: 4rem !important;
    }
}
</style>
{% endblock %}