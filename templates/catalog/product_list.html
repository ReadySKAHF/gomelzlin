{% extends 'base.html' %}
{% load static %}

{% block title %}{{ title }} - –û–ê–û "–ì–ó–õ–∏–ù"{% endblock %}

{% block content %}
<div class="catalog-page">
    <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
    <nav class="breadcrumb" style="padding: 1rem 0; margin-bottom: 2rem;">
        <div class="container">
            <a href="{% url 'core:home' %}" style="color: var(--secondary-gray); text-decoration: none;">–ì–ª–∞–≤–Ω–∞—è</a>
            <span style="margin: 0 0.5rem; color: var(--secondary-gray);">‚Üí</span>
            <span style="color: var(--dark-gray); font-weight: 500;">–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</span>
        </div>
    </nav>

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div class="page-header" style="text-align: center; margin-bottom: 3rem;">
        <div class="container">
            <h1 style="font-size: 2.5rem; color: var(--dark-gray); margin-bottom: 1rem;">
                –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –û–ê–û "–ì–ó–õ–∏–ù"
            </h1>
            <p style="font-size: 1.1rem; color: var(--secondary-gray); max-width: 600px; margin: 0 auto;">
                –®–∏—Ä–æ–∫–∏–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏, –º–µ—Ç–∏–∑–Ω–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
            </p>
        </div>
    </div>

    <!-- –°–µ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
    <div class="container">
        <div class="categories-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2rem; margin-bottom: 4rem;">
            {% for category in categories %}
            <a href="{{ category.absolute_url }}" class="category-card" style="text-decoration: none; color: inherit; display: block;">
                <div style="background: white; border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden; transition: all 0.3s ease; height: 100%;">
                    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
                    <div class="category-image" style="height: 200px; background: linear-gradient(135deg, var(--primary-red), #e74c3c); position: relative; overflow: hidden;">
                        {% if category.image %}
                            <img src="{{ category.image }}" alt="{{ category.name }}" 
                                 style="width: 100%; height: 100%; object-fit: cover;">
                        {% else %}
                            <!-- –ò–∫–æ–Ω–∫–∏-–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
                            <div style="display: flex; align-items: center; justify-content: center; height: 100%; font-size: 4rem; color: white;">
                                {% if category.name == "–ó–µ—Ä–Ω–æ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}üåæ
                                {% elif category.name == "–ö–æ—Ä–º–æ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}üöú
                                {% elif category.name == "–ö–∞—Ä—Ç–æ—Ñ–µ–ª–µ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}ü•î
                                {% elif category.name == "–ú–µ—Ç–∏–∑–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è" %}üî©
                                {% elif category.name == "–ë—É–Ω–∫–µ—Ä—ã-–ø–µ—Ä–µ–≥—Ä—É–∑—á–∏–∫–∏" %}üì¶
                                {% elif category.name == "–ù–æ–≤–∏–Ω–∫–∏" %}‚≠ê
                                {% elif category.name == "–ü—Ä–æ—á–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}‚öôÔ∏è
                                {% elif category.name == "–ü—Ä–æ—á–∏–µ —Ç–æ–≤–∞—Ä—ã, —Ä–∞–±–æ—Ç—ã –∏ —É—Å–ª—É–≥–∏" %}üõ†Ô∏è
                                {% elif category.name == "–†–µ–∂—É—â–∏–µ —Å–∏—Å—Ç–µ–º—ã –∂–∞—Ç–æ–∫" %}üî™
                                {% elif category.name == "–°–∞–º–æ—Ö–æ–¥–Ω—ã–µ –Ω–æ—Å–∏–ª–∫–∏" %}üöõ
                                {% else %}üè≠
                                {% endif %}
                            </div>
                        {% endif %}
                        
                        <!-- Overlay –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ -->
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.7)); height: 50px;"></div>
                    </div>

                    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
                    <div style="padding: 1.5rem;">
                        <div class="category-content">
                            <h3 style="font-size: 1.3rem; font-weight: 600; color: var(--dark-gray); margin-bottom: 0.5rem; line-height: 1.3;">
                                {{ category.name }}
                            </h3>
                            
                            <div class="category-description" style="color: var(--secondary-gray); font-size: 0.9rem; margin-bottom: 1rem; line-height: 1.4;">
                                {% if category.description %}
                                    {{ category.description|truncatewords:15 }}
                                {% else %}
                                    <!-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è -->
                                    {% if category.name == "–ó–µ—Ä–Ω–æ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                        –ñ–∞—Ç–∫–∏ –≤–∞–ª–∫–æ–≤—ã–µ, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ, –¥–ª—è –∑–µ—Ä–Ω–æ–≤—ã—Ö –∫—É–ª—å—Ç—É—Ä, –ø–æ–¥–±–æ—Ä—â–∏–∫–∏ –∏ –∫–æ–º–ø–ª–µ–∫—Ç—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
                                    {% elif category.name == "–ö–æ—Ä–º–æ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                        –ñ–∞—Ç–∫–∏ –¥–ª—è —Ç—Ä–∞–≤ –∏ –≥—Ä—É–±–æ—Å—Ç–µ–±–µ–ª—å–Ω—ã—Ö –∫—É–ª—å—Ç—É—Ä, –∫–æ—Ä–º–æ—É–±–æ—Ä–æ—á–Ω—ã–µ –∫–æ–º–±–∞–π–Ω—ã, –∫–æ—Å–∏–ª–∫–∏ –∏ –ø–æ–¥–±–æ—Ä—â–∏–∫–∏
                                    {% elif category.name == "–ö–∞—Ä—Ç–æ—Ñ–µ–ª–µ—É–±–æ—Ä–æ—á–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                        –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è —É–±–æ—Ä–∫–∏ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π
                                    {% elif category.name == "–ú–µ—Ç–∏–∑–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è" %}
                                        –ë–æ–ª—Ç—ã, –≤–∏–Ω—Ç—ã, –≥–∞–π–∫–∏, –∑–∞–∫–ª–µ–ø–∫–∏, –æ—Å–∏, —à–∞–π–±—ã –ø—Ä—É–∂–∏–Ω–Ω—ã–µ –∏ —à–ø–∏–ª—å–∫–∏
                                    {% elif category.name == "–ü—Ä–æ—á–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" %}
                                        –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–µ–ª—å—Å–∫–æ—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞
                                    {% elif category.name == "–ë—É–Ω–∫–µ—Ä—ã-–ø–µ—Ä–µ–≥—Ä—É–∑—á–∏–∫–∏" %}
                                        –ë—É–Ω–∫–µ—Ä—ã —Ä–∞–∑–ª–∏—á–Ω–æ–π –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ –ø–µ—Ä–µ–≥—Ä—É–∑–æ—á–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è –∑–µ—Ä–Ω–∞
                                    {% elif category.name == "–ù–æ–≤–∏–Ω–∫–∏" %}
                                        –ù–æ–≤—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –æ—Ç –û–ê–û "–ì–ó–õ–∏–ù"
                                    {% elif category.name == "–ü—Ä–æ—á–∏–µ —Ç–æ–≤–∞—Ä—ã, —Ä–∞–±–æ—Ç—ã –∏ —É—Å–ª—É–≥–∏" %}
                                        –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ, —Ä–µ–º–æ–Ω—Ç, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏
                                    {% elif category.name == "–†–µ–∂—É—â–∏–µ —Å–∏—Å—Ç–µ–º—ã –∂–∞—Ç–æ–∫" %}
                                        –ù–æ–∂–∏ –∂–∞—Ç–≤–µ–Ω–Ω—ã–µ, —Å–µ–≥–º–µ–Ω—Ç—ã —Ä–µ–∂—É—â–∏–µ, –ø–∞–ª—å—Ü—ã —Ä–µ–∂—É—â–µ–≥–æ –∞–ø–ø–∞—Ä–∞—Ç–∞ –∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ–∑—ã
                                    {% elif category.name == "–°–∞–º–æ—Ö–æ–¥–Ω—ã–µ –Ω–æ—Å–∏–ª–∫–∏" %}
                                        –°–∞–º–æ—Ö–æ–¥–Ω—ã–µ –Ω–æ—Å–∏–ª–∫–∏ –∏ —Ç–µ–ª–µ–∂–∫–∏ —Ä–∞–∑–ª–∏—á–Ω–æ–π –≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –≥—Ä—É–∑–æ–≤
                                    {% else %}
                                        –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è –æ—Ç –û–ê–û "–ì–ó–õ–∏–ù"
                                    {% endif %}
                                {% endif %}
                            </div>
                            
                            <div class="category-meta" style="display: flex; justify-content: space-between; align-items: center;">
                                <div class="product-count" style="background: var(--light-gray); padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.85rem; color: var(--secondary-gray);">
                                    {{ category.total_products }} —Ç–æ–≤–∞—Ä{{ category.total_products|pluralize:"–æ–≤,–æ–≤,–æ–≤" }}
                                </div>
                                
                                <div class="category-arrow" style="color: var(--primary-red); font-size: 1.2rem;">
                                    ‚Üí
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
            {% empty %}
            <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: var(--secondary-gray);">
                <h3 style="margin-bottom: 1rem;">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                <p>–í–æ–∑–º–æ–∂–Ω–æ –¥–∞–Ω–Ω—ã–µ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –±–∞–∑—É. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö.</p>
                <div style="margin-top: 2rem;">
                    <a href="{% url 'core:home' %}" class="btn btn-primary">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                </div>
                
                <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
                <div style="margin-top: 2rem; padding: 1rem; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px; text-align: left;">
                    <strong>–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</strong><br>
                    –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: <code>python manage.py load_initial_data</code>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã -->
        {% if featured_products %}
        <section style="margin-top: 4rem;">
            <h2 style="text-align: center; font-size: 2rem; margin-bottom: 2rem; color: var(--dark-gray);">
                –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
            </h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem;">
                {% for product in featured_products %}
                <div class="product-card" onclick="location.href='{{ product.get_absolute_url }}'" 
                     style="background: white; border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden; cursor: pointer; transition: all 0.3s ease;">
                    <div class="product-image" style="height: 200px; background: var(--light-gray); position: relative;">
                        {% if product.image %}
                            <img src="{{ product.image.url }}" alt="{{ product.name }}" 
                                 style="width: 100%; height: 100%; object-fit: cover;">
                        {% else %}
                            <div style="display: flex; align-items: center; justify-content: center; height: 100%; color: var(--secondary-gray); font-size: 3rem;">
                                üì¶
                            </div>
                        {% endif %}
                    </div>
                    <div style="padding: 1.5rem;">
                        <h3 style="font-size: 1.1rem; font-weight: 600; color: var(--dark-gray); margin-bottom: 0.5rem;">
                            {{ product.name }}
                        </h3>
                        <p style="color: var(--secondary-gray); font-size: 0.9rem; margin-bottom: 1rem;">
                            –ê—Ä—Ç–∏–∫—É–ª: {{ product.article }}
                        </p>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-size: 1.2rem; font-weight: 600; color: var(--primary-red);">
                                {% if product.price %}{{ product.price|floatformat:0 }} BYN{% else %}–ü–æ –∑–∞–ø—Ä–æ—Å—É{% endif %}
                            </span>
                            <span style="font-size: 0.9rem; color: var(--secondary-gray);">
                                {{ product.category.name }}
                            </span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}
    </div>
</div>

<style>
:root {
    --primary-red: #cb413b;
    --secondary-gray: #808080;
    --dark-gray: #333333;
    --light-gray: #f5f5f5;
    --radius: 10px;
    --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    --transition: all 0.3s ease;
}

.category-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.product-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.btn {
    display: inline-block;
    padding: 0.75rem 1.5rem;
    border-radius: var(--radius);
    text-decoration: none;
    font-weight: 500;
    transition: var(--transition);
    border: none;
    cursor: pointer;
}

.btn-primary {
    background: var(--primary-red);
    color: white;
}

.btn-primary:hover {
    background: #b73730;
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    .categories-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .page-header h1 {
        font-size: 2rem !important;
    }
}
</style>
{% endblock %}